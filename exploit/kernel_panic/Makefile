SRCS = $(wildcard *.c)
OBJS = $(SRCS:.c=.o)

name := panic
utils := ../utils
utils_o := $(utils).o

RAMFS_LOCATION := ./

all: $(utils_o) $(name)

$(utils_o):
	$(CC) -c $(utils).c -o $@

$(name): $(OBJS)
	$(CC) -static -o $@ $^ $(utils_o)
	cp -f $@ $(RAMFS_LOCATION)/$@

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

clean: 
	$(RM) $(OBJS)
	$(RM) $(name)
